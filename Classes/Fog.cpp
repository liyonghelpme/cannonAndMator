#include "Fog.h"
Fog *Fog::create() {
    Fog *pRet = new Fog();
    pRet->init();
    pRet->autorelease();
    return pRet;
}
void Fog::initMoveFog() {
float pos[] = {
1080 , 479 , 4.0 ,
720 , 761 , 4.0 ,
738 , 170 , 4.0 ,
1051 , 44 , 5.0 ,
1000 , 176 , 1.0 ,
1031 , 135 , 2.0 ,
1095 , 126 , 1.0 ,
959 , 170 , 1.0 ,
961 , 114 , 2.0 ,
1054 , 120 , 1.0 ,
887 , 123 , 1.0 ,
889 , 67 , 2.0 ,
982 , 73 , 1.0 ,
820 , 66 , 1.0 ,
822 , 10 , 2.0 ,
915 , 16 , 1.0 ,
1052 , 254 , 1.0 ,
1122 , 237 , 2.0 ,
1093 , 176 , 2.0 ,
1093 , 178 , 2.0 ,
711 , 32 , 1.0 ,
781 , 15 , 2.0 ,
752 , -46 , 2.0 ,
752 , -44 , 2.0 ,
808 , -121 , 5.0 ,
757 , 11 , 1.0 ,
788 , -30 , 2.0 ,
852 , -39 , 1.0 ,
716 , 5 , 1.0 ,
718 , -51 , 2.0 ,
811 , -45 , 1.0 ,
644 , -42 , 1.0 ,
646 , -98 , 2.0 ,
739 , -92 , 1.0 ,
577 , -99 , 1.0 ,
579 , -155 , 2.0 ,
672 , -149 , 1.0 ,
809 , 89 , 1.0 ,
879 , 72 , 2.0 ,
850 , 11 , 2.0 ,
850 , 13 , 2.0 ,
468 , -133 , 1.0 ,
538 , -150 , 2.0 ,
509 , -211 , 2.0 ,
509 , -209 , 2.0 ,
865 , 41 , 5.0 ,
814 , 173 , 1.0 ,
845 , 132 , 2.0 ,
909 , 123 , 1.0 ,
773 , 167 , 1.0 ,
775 , 111 , 2.0 ,
868 , 117 , 1.0 ,
701 , 120 , 1.0 ,
703 , 64 , 2.0 ,
796 , 70 , 1.0 ,
634 , 63 , 1.0 ,
636 , 7 , 2.0 ,
729 , 13 , 1.0 ,
866 , 251 , 1.0 ,
936 , 234 , 2.0 ,
907 , 173 , 2.0 ,
907 , 175 , 2.0 ,
525 , 29 , 1.0 ,
595 , 12 , 2.0 ,
566 , -49 , 2.0 ,
566 , -47 , 2.0 ,
969 , 572 , 4.0 ,
840 , 656 , 4.0 ,
1077 , 995 , 4.0 ,
1266 , 959 , 4.0 ,
1425 , 872 , 4.0 ,
1372 , 733 , 5.0 ,
1075 , 741 , 2.0 ,
986 , 745 , 2.0 ,
1111 , 782 , 1.0 ,
1181 , 765 , 2.0 ,
1152 , 704 , 2.0 ,
1152 , 706 , 2.0 ,
1261 , 716 , 1.0 ,
1331 , 699 , 2.0 ,
1302 , 638 , 2.0 ,
1302 , 640 , 2.0 ,
1364 , 675 , 1.0 ,
1434 , 658 , 2.0 ,
1405 , 597 , 2.0 ,
1405 , 599 , 2.0 ,
1204 , 768 , 1.0 ,
1274 , 751 , 2.0 ,
1245 , 690 , 2.0 ,
1245 , 692 , 2.0 ,
1123 , 862 , 5.0 ,
826 , 870 , 2.0 ,
737 , 874 , 2.0 ,
862 , 911 , 1.0 ,
932 , 894 , 2.0 ,
903 , 833 , 2.0 ,
903 , 835 , 2.0 ,
1012 , 845 , 1.0 ,
1082 , 828 , 2.0 ,
1053 , 767 , 2.0 ,
1053 , 769 , 2.0 ,
1115 , 804 , 1.0 ,
1185 , 787 , 2.0 ,
1156 , 726 , 2.0 ,
1156 , 728 , 2.0 ,
955 , 897 , 1.0 ,
1025 , 880 , 2.0 ,
996 , 819 , 2.0 ,
996 , 821 , 2.0 ,
1192 , 724 , 5.0 ,
895 , 732 , 2.0 ,
806 , 736 , 2.0 ,
931 , 773 , 1.0 ,
1001 , 756 , 2.0 ,
972 , 695 , 2.0 ,
972 , 697 , 2.0 ,
1081 , 707 , 1.0 ,
1151 , 690 , 2.0 ,
1122 , 629 , 2.0 ,
1122 , 631 , 2.0 ,
1184 , 666 , 1.0 ,
1254 , 649 , 2.0 ,
1225 , 588 , 2.0 ,
1225 , 590 , 2.0 ,
1024 , 759 , 1.0 ,
1094 , 742 , 2.0 ,
1065 , 681 , 2.0 ,
1065 , 683 , 2.0 ,
-93 , 446 , 4.0 ,
114 , 506 , 4.0 ,
-234 , 833 , 4.0 ,
225 , 692 , 4.0 ,
-70 , 733 , 5.015625 ,
309 , 945 , 1.0 ,
-88 , 831 , 1.0 ,
-18 , 814 , 2.0 ,
-47 , 753 , 2.0 ,
-47 , 755 , 2.0 ,
54 , 913 , 1.0 ,
124 , 896 , 2.0 ,
95 , 835 , 2.0 ,
95 , 837 , 2.0 ,
158 , 970 , 1.0 ,
228 , 953 , 2.0 ,
199 , 892 , 2.0 ,
199 , 894 , 2.0 ,
-64 , 901 , 1.0 ,
6 , 884 , 2.0 ,
-23 , 823 , 2.0 ,
-23 , 825 , 2.0 ,
105 , 699 , 1.0 ,
-292 , 585 , 1.0 ,
-222 , 568 , 2.0 ,
-251 , 507 , 2.0 ,
-251 , 509 , 2.0 ,
-150 , 667 , 1.0 ,
-80 , 650 , 2.0 ,
-109 , 589 , 2.0 ,
-109 , 591 , 2.0 ,
-46 , 724 , 1.0 ,
24 , 707 , 2.0 ,
-5 , 646 , 2.0 ,
-5 , 648 , 2.0 ,
-268 , 655 , 1.0 ,
-198 , 638 , 2.0 ,
-227 , 577 , 2.0 ,
-227 , 579 , 2.0 ,
336 , 789 , 1.0 ,
-61 , 675 , 1.0 ,
9 , 658 , 2.0 ,
-20 , 597 , 2.0 ,
-20 , 599 , 2.0 ,
81 , 757 , 1.0 ,
151 , 740 , 2.0 ,
122 , 679 , 2.0 ,
122 , 681 , 2.0 ,
185 , 814 , 1.0 ,
255 , 797 , 2.0 ,
226 , 736 , 2.0 ,
226 , 738 , 2.0 ,
-37 , 745 , 1.0 ,
33 , 728 , 2.0 ,
4 , 667 , 2.0 ,
4 , 669 , 2.0 ,
-201 , 191 , 4.0 ,
147 , -34 , 4.0 ,
-81 , 287 , 4.0 ,
138 , 185 , 4.0 ,
-321 , -211 , 4.0 ,
-183 , -340 , 4.0 ,
-21 , 158 , 4.0 ,
258 , 122 , 4.0 ,
270 , -82 , 4.0 ,
-31 , -31 , 1.0 ,
0 , -72 , 2.0 ,
64 , -81 , 1.0 ,
98 , -88 , 1.0 ,
129 , -129 , 2.0 ,
193 , -138 , 1.0 ,
185 , -169 , 1.0 ,
216 , -210 , 2.0 ,
280 , -219 , 1.0 ,
74 , -166 , 1.0 ,
105 , -207 , 2.0 ,
169 , -216 , 1.0 ,
-40 , -82 , 1.0 ,
-9 , -123 , 2.0 ,
55 , -132 , 1.0 ,
-52 , -224 , 5.015625 ,
-391 , 143 , 1.0 ,
-360 , 102 , 2.0 ,
-296 , 93 , 1.0 ,
-262 , 86 , 1.0 ,
-231 , 45 , 2.0 ,
-167 , 36 , 1.0 ,
-175 , 5 , 1.0 ,
-144 , -36 , 2.0 ,
-80 , -45 , 1.0 ,
-286 , 8 , 1.0 ,
-255 , -33 , 2.0 ,
-191 , -42 , 1.0 ,
-400 , 92 , 1.0 ,
-369 , 51 , 2.0 ,
-305 , 42 , 1.0 ,
-412 , -50 , 5.015625 ,
-157 , 131 , 1.0 ,
-126 , 90 , 2.0 ,
-62 , 81 , 1.0 ,
-28 , 74 , 1.0 ,
3 , 33 , 2.0 ,
67 , 24 , 1.0 ,
59 , -7 , 1.0 ,
90 , -48 , 2.0 ,
154 , -57 , 1.0 ,
-52 , -4 , 1.0 ,
-21 , -45 , 2.0 ,
43 , -54 , 1.0 ,
-166 , 80 , 1.0 ,
-135 , 39 , 2.0 ,
-71 , 30 , 1.0 ,
-178 , -62 , 5.015625 ,
};
int len =  723 ;


CCPoint center;
    center.x = 480;
    center.y = 320;

    CCSprite *f;
    for(int i = 0; i < len; i += 3 ) {
        f = CCSprite::create("fog.png");
        f->setPosition(ccp(pos[i], pos[i+1]));
        f->setScale(pos[i+2]);
        addChild(f);
        
        //fogs->addObject(f);

        float dx = pos[i]-center.x;
        float dy = pos[i+1]-center.y;

        //和屏幕比例近似 成比例
        if(dx >= 0 && dy >= 0) {
            f->runAction(CCMoveBy::create(1.0, ccp(-300, -250)));  
        } else if(dx <= 0 && dy >= 0) {
            f->runAction(CCMoveBy::create(1.0, ccp(150, -100)));  
        } else if(dx <= 0 && dy <= 0) {
            f->runAction(CCMoveBy::create(1.0, ccp(300, 250)));  
        } else if(dx >= 0 && dy <= 0) {
            f->runAction(CCMoveBy::create(1.0, ccp(-150, 100)));  
        }

    }

}
void Fog::initBigFog() {
float pos[] = {
589 , 621 , 2.0 ,
500 , 625 , 2.0 ,
420 , 612 , 1.0 ,
787 , 215 , 1.0 ,
818 , 174 , 2.0 ,
882 , 165 , 1.0 ,
68 , 230 , 1.0 ,
99 , 189 , 2.0 ,
163 , 180 , 1.0 ,
197 , 173 , 1.0 ,
228 , 132 , 2.0 ,
292 , 123 , 1.0 ,
284 , 92 , 1.0 ,
315 , 51 , 2.0 ,
379 , 42 , 1.0 ,
173 , 95 , 1.0 ,
204 , 54 , 2.0 ,
268 , 45 , 1.0 ,
746 , 209 , 1.0 ,
748 , 153 , 2.0 ,
841 , 159 , 1.0 ,
674 , 162 , 1.0 ,
676 , 106 , 2.0 ,
769 , 112 , 1.0 ,
607 , 105 , 1.0 ,
609 , 49 , 2.0 ,
702 , 55 , 1.0 ,
59 , 179 , 1.0 ,
90 , 138 , 2.0 ,
154 , 129 , 1.0 ,
839 , 293 , 1.0 ,
909 , 276 , 2.0 ,
880 , 215 , 2.0 ,
880 , 217 , 2.0 ,
23 , 498 , 1.0 ,
93 , 481 , 2.0 ,
64 , 420 , 2.0 ,
64 , 422 , 2.0 ,
165 , 580 , 1.0 ,
235 , 563 , 2.0 ,
206 , 502 , 2.0 ,
206 , 504 , 2.0 ,
269 , 637 , 1.0 ,
339 , 620 , 2.0 ,
310 , 559 , 2.0 ,
310 , 561 , 2.0 ,
498 , 71 , 1.0 ,
568 , 54 , 2.0 ,
539 , -7 , 2.0 ,
539 , -5 , 2.0 ,
625 , 662 , 1.0 ,
695 , 645 , 2.0 ,
666 , 584 , 2.0 ,
666 , 586 , 2.0 ,
775 , 596 , 1.0 ,
845 , 579 , 2.0 ,
816 , 518 , 2.0 ,
816 , 520 , 2.0 ,
878 , 555 , 1.0 ,
948 , 538 , 2.0 ,
919 , 477 , 2.0 ,
919 , 479 , 2.0 ,
718 , 648 , 1.0 ,
788 , 631 , 2.0 ,
759 , 570 , 2.0 ,
759 , 572 , 2.0 ,
47 , 568 , 1.0 ,
117 , 551 , 2.0 ,
88 , 490 , 2.0 ,
88 , 492 , 2.0 ,
47 , 37 , 5.015625 ,
838 , 83 , 5.0 ,
886 , 613 , 5.0 ,
47 , 568 , 5.015625 ,
};
int len =  222 ;

CCPoint center;
    center.x = 480;
    center.y = 320;

    CCSprite *f;
    for(int i = 0; i < len; i += 3 ) {
        f = CCSprite::create("fog.png");
        f->setPosition(ccp(pos[i], pos[i+1]));
        f->setScale(pos[i+2]);
        addChild(f);
        
        //fogs->addObject(f);

        float dx = pos[i]-center.x;
        float dy = pos[i+1]-center.y;

        if(dx >= 0 && dy >= 0) {
            f->runAction(CCMoveBy::create(1.0, ccp(-400, -250)));  
        } else if(dx <= 0 && dy >= 0) {
            f->runAction(CCMoveBy::create(1.0, ccp(400, -250)));  
        } else if(dx <= 0 && dy <= 0) {
            f->runAction(CCMoveBy::create(1.0, ccp(400, 250)));  
        } else if(dx >= 0 && dy <= 0) {
            f->runAction(CCMoveBy::create(1.0, ccp(-400, 250)));  
        }

    }
}

void Fog::initFogPos() {
float pos[] = {
124 , 192 , 1.171875 ,
48 , 135 , 1.171875 ,
712 , 546 , 1.171875 ,
865 , 167 , 1.171875 ,
821 , 77 , 1.171875 ,
893 , 97 , 1.171875 ,
863 , 63 , 1.171875 ,
825 , 38 , 1.171875 ,
811 , 152 , 1.171875 ,
781 , 116 , 1.171875 ,
733 , 90 , 1.171875 ,
695 , 59 , 1.171875 ,
338 , 95 , 1.171875 ,
285 , 100 , 1.171875 ,
173 , 52 , 1.171875 ,
223 , 70 , 1.171875 ,
257 , 82 , 1.171875 ,
190 , 124 , 1.171875 ,
151 , 74 , 1.171875 ,
108 , 103 , 1.171875 ,
60 , 121 , 1.171875 ,
33 , 142 , 1.171875 ,
125 , 170 , 1.171875 ,
95 , 190 , 1.171875 ,
89 , 258 , 1.171875 ,
57 , 288 , 1.171875 ,
54 , 440 , 1.171875 ,
104 , 463 , 1.171875 ,
146 , 479 , 1.171875 ,
344 , 593 , 1.171875 ,
289 , 567 , 1.171875 ,
253 , 545 , 1.171875 ,
154 , 566 , 1.171875 ,
109 , 545 , 1.171875 ,
38 , 584 , 1.171875 ,
157 , 599 , 1.171875 ,
79 , 564 , 1.171875 ,
116 , 581 , 1.171875 ,
912 , 438 , 1.171875 ,
868 , 464 , 1.171875 ,
825 , 497 , 1.171875 ,
636 , 611 , 1.171875 ,
675 , 589 , 1.171875 ,
748 , 548 , 1.171875 ,
713 , 578 , 1.171875 ,
802 , 610 , 1.171875 ,
802 , 610 , 1.171875 ,
935 , 522 , 1.171875 ,
874 , 552 , 1.171875 ,
904 , 548 , 1.171875 ,
843 , 562 , 1.171875 ,
877 , 569 , 1.171875 ,
};
int len =  156 ;

    CCSprite *f;
    for(int i = 0; i < len; i += 3 ) {
        f = CCSprite::create("fog.png");
        f->setPosition(ccp(pos[i], pos[i+1]));
        f->setScale(pos[i+2]);
        addChild(f);

    }
}
bool Fog::init() {
    fogs = CCArray::create();
    fogs->retain();
    
    //initFogPos();
    //initBigFog();
    initMoveFog();
    

    
    /*
    for(int i = 0; i < 2; i++) {
        float rd = random()%10000/10000.*4+1;
        f = CCSprite::create("fog.png");
        f->setScale(rd);
        f->setPosition(ccp(200, 150));

        addChild(f);
        fogs->addObject(f);
    }
    */

    scheduleUpdate();
    return true;
}

void Fog::update(float dt) {
}

Fog::~Fog() {
    fogs->release();
}
